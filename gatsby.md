To deploy to GitHub pages, use the gh-pages extension. Don't make a gh-pages branch in advance. Visit the GitHub settings to set the branch and folder. 

You may need to use siteMetadata in gatsby-config to set pathPrefix if the repository is not of the same name as the GitHub account. You may also need to add a CNAME file to the static folder of the gatsby site. 